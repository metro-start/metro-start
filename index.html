<!DOCTYPE html>
<html>
<head>
	<title>metro start</title>
	<link type="text/css" rel="stylesheet" href="css/reset.css" />
	<link type="text/css" rel="stylesheet" href="css/main.css" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/trianglify/1.1.0/trianglify.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/tinycolor/1.4.1/tinycolor.min.js"></script>
	<script src="js/jquery.cycle.all.latest.js"></script>
</head>
<body style="width: 960px; margin: auto">
	<h1>metro start</h1>
	<p class="info">A modern new tab page for the web.</p>
	<p class="info smaller">Inspired by Zune.</p>
	<p class="info smaller">
		<a href="https://chrome.google.com/webstore/detail/metro-start/bbhdfpmfdplolnnkpdepnelcfdmikjfd">Get Metro Start Now.</a>
	</p>
	<p class="info smaller">
		<span id="pause_bg" class="clickable">(pause background)</span>	
	</p>
	<div class="slideshow">
		<img class="banner" src="img/banner1.png" alt="metro start apps page." />
		<img class="banner" src="img/banner2.png" alt="metro start bookmarks page." />
		<img class="banner" src="img/banner3.png" alt="metro start theme editor." />
	</div>
	<a href="https://github.com/metro-start/metro-start">
		<img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub" />
	</a>

	<script type="text/javascript">
		$('.slideshow').cycle({
			fx: 'scrollLeft'
		});

		var variance = Math.random();
		var cell_size = Math.random() * 200 + 40;
		var x_colors = Trianglify({x_colors: 'random'}).opts.x_colors;

		var updateBg = () => {
			variance = (variance <= 0 ? 1 : (variance - 0.1));
			cell_size = (cell_size <= 40 ? 250 : (cell_size - 25));
			x_colors = x_colors.map(c => tinycolor(c).spin(25).toHexString());

			var bodyPattern = Trianglify({
				width: window.innerWidth,
				height: window.innerHeight,
				cell_size: cell_size,
				variance: variance,
				x_colors: x_colors
			});
			document.body.style.backgroundImage = 'url(' + bodyPattern.png() + ')';
		};

		$('#pause_bg').click(() => {
			if (!!this.interval) {
				$('#pause_bg').text('(resume background)')
				window.clearInterval(this.interval);
				this.interval = undefined;
			} else {
				$('#pause_bg').text('(pause background)')
				this.interval = window.setInterval(updateBg, 1000);
			}
		}).click();

		updateBg();
	</script>
</body>
</html>
